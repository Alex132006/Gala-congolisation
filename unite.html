<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Mea+Culpa&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    <link rel="shortcut icon" href="logo2.jpg">
    <link rel="icon" href="logo2.jpg" type="image/x-icon">
    <link rel="icon" href="logo2.jpg" type="image/png" sizes="any">
    <link rel="apple-touch-icon" href="logo2.jpg" sizes="180x180">
    <link rel="manifest" href="/manifest.json">
    <title>Bielleterie-ouverte - Unite</title>
</head>

<style>
    * {
        box-sizing: border-box;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 0;
    }

    body {
        margin: 0;
        padding: 0;
        position: relative;
        min-height: 100vh;
        overflow-x: hidden;
    }

    body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url(image\ copy\ 2.png);
        background-size: cover;
        background-position: center;
        filter: blur(2px) brightness(0.8);
        z-index: -1;
    }

    /* Bouton info */
    .info-button {
        width: 50px;
        height: 50px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 20px;
        border-radius: 30px;
        backdrop-filter: blur(100px);
        box-shadow: 0 0 10px #000000;
        color: #ffffff;
        border: 1px solid white;
        position: fixed;
        top: 10px;
        right: 10px;
        cursor: pointer;
        z-index: 1000;
        text-decoration: none;
    }

    .info-button:hover {
        transform: translateX(2px);
        background: rgba(255, 255, 255, 0.197);
        box-shadow: none;
    }

    /* Logos responsive */
    .logo {
        position: fixed;
        top: 20px;
        right: 20px;
        width: 100px;
        height: auto;
        z-index: 999;
        border-radius: 50%;
        padding: 3px;
        mix-blend-mode: multiply;
        background: linear-gradient(to right, #ff000000, #ffffff00);
        z-index: 1000;
    }

    .logo2 {
        position: fixed;
        top: 20px;
        left: 20px;
        width: 100px;
        height: auto;
        z-index: 999;
        border-radius: 50%;
        padding: 3px;
        mix-blend-mode: multiply;
        background: linear-gradient(to right, #ffffff44, #ffffffac);
    }

    /* Section principale */
    .billet {
        text-align: center;
        padding: 20px;
        color: white;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 80vh;
        margin-bottom: 10vh;
    }

    .ligne {
        border-bottom: 1px solid #ff0000;
        padding-bottom: 10px;
        margin-bottom: 20px;
        width: 100%;
        max-width: 300px;
    }

    .billet h1 {
        font-family: "Mea Culpa", cursive;
        font-weight: bold;
        font-style: normal;
        font-size: clamp(40px, 10vw, 80px);
        margin-bottom: 20px;
    }

    .user {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 20px;
        z-index: 1;
        margin-top: 30px;
        width: 100%;
        max-width: 500px;
        padding: 0 20px;
    }

    .users {
        background: #00000046;
        width: 100%;
        max-width: 300px;
        height: 40px;
        border-radius: 10px;
        border: 1px solid #ffffff;
        box-shadow: 0 0 10px #000000;
        color: #ffffff;
        font-size: 16px;
        text-align: center;
        padding: 0 15px;
        transition: all 0.3s ease;
    }

    .users:focus {
        outline: none;
        border-color: #ff6b6b;
        box-shadow: 0 0 10px #ff6b6b;
    }

    .users::placeholder {
        color: rgba(255, 255, 255, 0.7);
    }

    .use-btn {
        margin-top: 10px;
    }

    .users-btn {
        width: 130px;
        height: 40px;
        background: #a4a2a25d;
        border-radius: 10px;
        border: 1px solid #f3f3f3;
        color: #ffffff;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .users-btn:hover {
        background: rgba(164, 162, 162, 0.8);
        transform: scale(1.05);
    }

    .users-btn:disabled {
        background: #666;
        cursor: not-allowed;
        transform: none;
    }

    /* Social media buttons wrapper */
    .wrapper {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 999;
        width: 100%;
        max-width: 400px;
    }

    /* Social buttons list */
    .wrapper ul {
        display: flex;
        gap: 10px;
        list-style: none;
        padding: 0 20px;
        justify-content: center;
        flex-wrap: wrap;
    }

    /* Individual social icon button */
    .wrapper .icon {
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border-radius: 50%;
        width: 45px;
        height: 45px;
        background: rgba(255, 255, 255, 0.05);
        transition: all 0.3s ease;
        box-shadow: 0 15px 35px rgb(0, 0, 0);
        border: 1px solid rgba(255, 255, 255, 0.288);
    }

    /* Social icon font styling */
    .wrapper .icon i {
        font-size: 18px;
        color: white;
    }

    /* Social icon hover animation */
    .wrapper .icon:hover {
        transform: scale(1.2);
    }

    /* Social icon hover colors */
    .wrapper .facebook:hover {
        background: #1d7df2;
    }

    .wrapper .twitter:hover {
        background: #24a1de;
    }

    .wrapper .youtube:hover {
        background: #cd201f;
    }

    .wrapper .whatsapp:hover {
        background: rgb(47, 183, 47);
    }

    .wrapper .telephone:hover {
        background: #333;
    }

    .wrapper .mail:hover {
        background: #d71919;
    }

    .wrapper .telegram:hover {
        background: #2aabee;
    }

    /* Notification */
    .notification {
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: #4CAF50;
        color: white;
        padding: 15px 25px;
        border-radius: 10px;
        z-index: 10000;
        display: none;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        font-weight: bold;
        text-align: center;
        max-width: 90%;
    }

    .notification.error {
        background: #ff4757;
    }

    .notification.warning {
        background: #ffa502;
    }

    /* Media Queries pour diff√©rents √©crans */
    @media (min-width: 768px) {

        .logo,
        .logo2 {
            width: 120px;
            top: 30px;
        }

        .logo {
            right: 30px;
        }

        .logo2 {
            left: 30px;
        }

        .info-button {
            top: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            font-size: 24px;
        }

        .billet h1 {
            margin-bottom: 40px;
        }

        .user {
            margin-top: 50px;
        }

        .users {
            width: 350px;
            font-size: 18px;
        }

        .wrapper .icon {
            width: 50px;
            height: 50px;
        }

        .wrapper .icon i {
            font-size: 22px;
        }
    }

    @media (min-width: 1024px) {

        .logo,
        .logo2 {
            width: 150px;
            top: 50px;
        }

        .logo {
            right: 50px;
        }

        .logo2 {
            left: 50px;
        }

        .billet h1 {
            font-size: 80px;
        }

        .user {
            gap: 25px;
        }

        .users {
            width: 400px;
            height: 45px;
            font-size: 20px;
        }

        .users-btn {
            width: 150px;
            height: 45px;
            font-size: 18px;
        }
    }

    @media (max-width: 480px) {

        .logo,
        .logo2 {
            width: 80px;
            top: 10px;
        }

        .logo {
            right: 10px;
        }

        .logo2 {
            left: 10px;
        }

        .info-button {
            width: 45px;
            height: 45px;
            font-size: 18px;
            top: 5px;
            right: 5px;
        }

        .billet {
            padding: 10px;
            min-height: 100vh;
        }

        .billet h1 {
            font-size: 36px;
            margin-bottom: 15px;
        }

        .ligne {
            max-width: 200px;
        }

        .user {
            margin-top: 20px;
            gap: 15px;
        }

        .users {
            height: 35px;
            font-size: 14px;
            max-width: 250px;
        }

        .users-btn {
            width: 120px;
            height: 35px;
            font-size: 14px;
        }

        .wrapper .icon {
            width: 40px;
            height: 40px;
        }

        .wrapper .icon i {
            font-size: 16px;
        }

        .wrapper ul {
            gap: 8px;
        }
    }

    @media (max-width: 320px) {

        .logo,
        .logo2 {
            width: 60px;
        }

        .billet h1 {
            font-size: 32px;
        }

        .ligne {
            max-width: 180px;
        }

        .user {
            gap: 12px;
        }

        .users {
            max-width: 220px;
            height: 32px;
            font-size: 12px;
        }

        .users-btn {
            width: 100px;
            height: 32px;
            font-size: 12px;
        }

        .wrapper .icon {
            width: 35px;
            height: 35px;
        }

        .wrapper .icon i {
            font-size: 14px;
        }
    }
</style>

<body>

    <img src="logo.jpg" class="logo" alt="Logo">
    <img src="logo2.jpg" class="logo2" alt="Logo secondaire">

    <div class="notification" id="notification"></div>

    <div class="billet">
        <h1 class="ligne">Unite</h1>

        <div class="user">
            <input type="text" class="users" name="user" placeholder="Entrez votre nom" id="user" maxlength="50">
            <input type="email" class="users" name="email" placeholder="Entrez votre e-mail" id="email" maxlength="100">
            <input type="tel" class="users" name="phone" placeholder="Entrez votre numero" id="phone" maxlength="15">
            <div class="use-btn">
                <input type="button" class="users-btn" value="Entrer" id="submitBtn">
            </div>
        </div>
    </div>

    <div class="wrapper">
        <ul>
            <li class="icon whatsapp">
                <a href="https://wa.me/" aria-label="WhatsApp" rel="noopener noreferrer" target="_blank">
                    <i class="fa-brands fa-whatsapp"></i>
                </a>
            </li>

            <li class="icon telegram">
                <a href="https://t.me/+" aria-label="Telegram" rel="noopener noreferrer" target="_blank">
                    <i class="fa-brands fa-telegram"></i>
                </a>
            </li>

            <li class="icon telephone">
                <a href="tel:+" aria-label="T√©l√©phone" rel="noopener">
                    <i class="fa fa-phone" aria-hidden="true"></i>
                </a>
            </li>

            <li class="icon facebook">
                <a href="" aria-label="Facebook" rel="noopener noreferrer" target="_blank">
                    <i class="fa-brands fa-facebook-f"></i>
                </a>
            </li>

            <li class="icon youtube">
                <a href="" aria-label="YouTube" rel="noopener noreferrer" target="_blank">
                    <i class="fab fa-youtube"></i>
                </a>
            </li>
        </ul>
    </div>

    <script>
        // SYST√àME CLIENT S√âCURIS√â POUR UNITE
        class BilletSystemUnite {
            constructor() {
                this.amount = 3000; // Prix unit√©
                this.init();
            }

            init() {
                document.addEventListener('DOMContentLoaded', () => {
                    this.setupFormSubmission();
                    this.setupSecurity();
                    this.setupInputValidation();
                });
            }

            setupFormSubmission() {
                const submitBtn = document.getElementById('submitBtn');
                if (!submitBtn) return;

                submitBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.handleFormSubmission();
                });

                // Soumission avec Enter
                document.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.handleFormSubmission();
                    }
                });
            }

            setupInputValidation() {
                const inputs = document.querySelectorAll('.users');
                inputs.forEach(input => {
                    input.addEventListener('input', (e) => {
                        this.validateInput(e.target);
                    });
                });
            }

            validateInput(input) {
                const value = input.value.trim();

                switch (input.type) {
                    case 'text':
                        // Validation nom : seulement lettres, espaces et certains caract√®res sp√©ciaux
                        input.value = value.replace(/[^a-zA-Z√Ä-√ø\s\-']/g, '');
                        break;
                    case 'email':
                        // Validation email basique
                        if (value && !this.validateEmail(value)) {
                            input.style.borderColor = '#ff4757';
                        } else {
                            input.style.borderColor = '#ffffff';
                        }
                        break;
                    case 'tel':
                        // Validation t√©l√©phone : seulement chiffres, +, -, espaces, parenth√®ses
                        input.value = value.replace(/[^\d+\-\s()]/g, '');
                        if (value && !this.validatePhone(value)) {
                            input.style.borderColor = '#ff4757';
                        } else {
                            input.style.borderColor = '#ffffff';
                        }
                        break;
                }
            }

            handleFormSubmission() {
                const clientData = this.getFormData();
                if (!clientData) return;

                this.saveClientData(clientData);
                this.showSuccess('Inscription r√©ussie !');
                this.processPayment(clientData);
                this.resetForm();
            }

            getFormData() {
                const nom1 = document.getElementById('user').value.trim();
                const email = document.getElementById('email').value.trim();
                const phone = document.getElementById('phone').value.trim();

                // Validation des champs requis
                if (!this.validateRequired([nom1, email, phone])) {
                    this.showError('Veuillez remplir tous les champs obligatoires');
                    return null;
                }

                if (!this.validateEmail(email)) {
                    this.showError('Veuillez entrer un email valide');
                    return null;
                }

                if (!this.validatePhone(phone)) {
                    this.showError('Veuillez entrer un num√©ro de t√©l√©phone valide');
                    return null;
                }

                if (!this.validateName(nom1)) {
                    this.showError('Le nom contient des caract√®res non autoris√©s');
                    return null;
                }

                return {
                    nom1: nom1,
                    email: email,
                    phone: phone,
                    type: 'unite',
                    timestamp: new Date().toISOString(),
                    page: 'unite',
                    ip: this.getUserIP(),
                    userAgent: navigator.userAgent,
                    id: this.generateUniqueId(),
                    paiement: 'En attente'
                };
            }

            validateRequired(fields) {
                return fields.every(field => field !== '');
            }

            validateEmail(email) {
                const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return re.test(email);
            }

            validatePhone(phone) {
                const cleaned = phone.replace(/\s/g, '');
                const re = /^[\+]?[0-9\-\s\(\)]{10,}$/;
                return re.test(cleaned) && cleaned.replace(/\D/g, '').length >= 8;
            }

            validateName(name) {
                const re = /^[a-zA-Z√Ä-√ø\s\-']+$/;
                return re.test(name);
            }

            generateUniqueId() {
                return 'UNI_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            }

            getUserIP() {
                // En production, utiliser un service d'API IP
                return 'local';
            }

            saveClientData(clientData) {
                try {
                    // Sauvegarde s√©curis√©e dans l'espace admin
                    this.saveToAdminStorage(clientData);

                    // Sauvegarde locale de backup
                    this.saveToLocalBackup(clientData);

                    console.log('‚úÖ Donn√©es enregistr√©es de mani√®re s√©curis√©e');
                    return true;
                } catch (error) {
                    console.error('‚ùå Erreur sauvegarde:', error);
                    this.showError('Erreur lors de l\'enregistrement. Veuillez r√©essayer.');
                    return false;
                }
            }

            saveToAdminStorage(clientData) {
                try {
                    // R√©cup√©rer les donn√©es existantes (chiffr√©es)
                    const encryptedData = localStorage.getItem('bielleterie_clients_secure');
                    let clients = [];

                    if (encryptedData) {
                        // D√©chiffrer les donn√©es
                        clients = JSON.parse(decodeURIComponent(escape(atob(encryptedData)))) || [];
                    }

                    // V√©rifier les doublons
                    const isDuplicate = clients.some(client =>
                        client.email === clientData.email || client.phone === clientData.phone
                    );

                    if (!isDuplicate) {
                        clients.push(clientData);

                        // Chiffrer et sauvegarder
                        const newEncryptedData = btoa(unescape(encodeURIComponent(JSON.stringify(clients))));
                        localStorage.setItem('bielleterie_clients_secure', newEncryptedData);
                    } else {
                        console.log('‚ö†Ô∏è Client d√©j√† enregistr√©');
                    }
                } catch (error) {
                    console.error('Erreur sauvegarde admin:', error);
                    throw error;
                }
            }

            saveToLocalBackup(clientData) {
                try {
                    let backupData = JSON.parse(localStorage.getItem('bielleterie_backup_unite')) || [];
                    backupData.push(clientData);

                    // Garder seulement les 50 derniers enregistrements
                    if (backupData.length > 50) {
                        backupData = backupData.slice(-50);
                    }

                    localStorage.setItem('bielleterie_backup_unite', JSON.stringify(backupData));
                } catch (error) {
                    console.error('Erreur sauvegarde backup:', error);
                }
            }

            processPayment(clientData) {
                const paymentWindow = document.createElement('div');
                paymentWindow.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: rgba(0, 0, 0, 0.95);
                    padding: 30px;
                    border-radius: 15px;
                    z-index: 10000;
                    color: white;
                    text-align: center;
                    min-width: 300px;
                    box-shadow: 0 0 50px rgba(255,107,107,0.3);
                    border: 2px solid #ff6b6b;
                    backdrop-filter: blur(10px);
                `;

                paymentWindow.innerHTML = `
                    <h3 style="color: #ff6b6b; margin-bottom: 20px;">üí≥ Paiement Unit√©</h3>
                    <p><strong>${clientData.nom1}</strong></p>
                    <p>Email: ${clientData.email}</p>
                    <p>T√©l√©phone: ${clientData.phone}</p>
                    <div style="margin: 20px 0; padding: 15px; background: rgba(255,107,107,0.1); border-radius: 10px;">
                        <p style="font-size: 24px; font-weight: bold; color: #ff6b6b;">${this.amount} FCFA</p>
                    </div>
                    
                    <div style="margin: 20px 0;">
                        <button onclick="window.billetSystem.completePayment('success', '${clientData.id}')" 
                                style="background: #4CAF50; color: white; padding: 12px 25px; border: none; border-radius: 8px; margin: 5px; cursor: pointer; font-size: 16px; font-weight: bold;">
                            ‚úÖ Paiement R√©ussi
                        </button>
                        <button onclick="window.billetSystem.completePayment('failed', '${clientData.id}')" 
                                style="background: #ff4757; color: white; padding: 12px 25px; border: none; border-radius: 8px; margin: 5px; cursor: pointer; font-size: 16px; font-weight: bold;">
                            ‚ùå √âchec Paiement
                        </button>
                    </div>
                    
                    <p style="font-size: 12px; color: #ccc; margin-top: 20px;">
                        ‚ö†Ô∏è Simulation - Int√©grez un vrai processeur de paiement
                    </p>
                `;

                document.body.appendChild(paymentWindow);

                // D√©sactiver le bouton de soumission
                document.getElementById('submitBtn').disabled = true;
            }

            completePayment(status, clientId) {
                try {
                    // Mettre √† jour le statut de paiement
                    this.updatePaymentStatus(clientId, status);

                    // Fermer la fen√™tre de paiement
                    document.querySelectorAll('div').forEach(div => {
                        if (div.innerHTML.includes('üí≥ Paiement Unit√©')) {
                            div.remove();
                        }
                    });

                    // R√©activer le bouton
                    document.getElementById('submitBtn').disabled = false;

                    if (status === 'success') {
                        this.showSuccess('Paiement confirm√© ! Votre billet est valid√©.');
                        this.trackConversion('unite', this.amount);
                    } else {
                        this.showError('Paiement √©chou√©. Veuillez r√©essayer.');
                    }
                } catch (error) {
                    console.error('Erreur paiement:', error);
                    this.showError('Erreur lors du traitement du paiement.');
                }
            }

            updatePaymentStatus(clientId, status) {
                try {
                    const encryptedData = localStorage.getItem('bielleterie_clients_secure');
                    if (encryptedData) {
                        let clients = JSON.parse(decodeURIComponent(escape(atob(encryptedData)))) || [];

                        const clientIndex = clients.findIndex(client => client.id === clientId);
                        if (clientIndex !== -1) {
                            clients[clientIndex].paiement = status === 'success' ? 'Pay√©' : '√âchec';
                            clients[clientIndex].paymentDate = new Date().toISOString();

                            const newEncryptedData = btoa(unescape(encodeURIComponent(JSON.stringify(clients))));
                            localStorage.setItem('bielleterie_clients_secure', newEncryptedData);
                        }
                    }
                } catch (error) {
                    console.error('Erreur mise √† jour paiement:', error);
                }
            }

            trackConversion(type, amount) {
                try {
                    const conversion = {
                        type: type,
                        amount: amount,
                        timestamp: new Date().toISOString(),
                        page: 'unite'
                    };

                    let conversions = JSON.parse(localStorage.getItem('bielleterie_conversions')) || [];
                    conversions.push(conversion);

                    // Garder seulement les 100 derni√®res conversions
                    if (conversions.length > 100) {
                        conversions = conversions.slice(-100);
                    }

                    localStorage.setItem('bielleterie_conversions', JSON.stringify(conversions));
                } catch (error) {
                    console.error('Erreur tracking conversion:', error);
                }
            }

            showSuccess(message) {
                this.showNotification(message, 'success');
            }

            showError(message) {
                this.showNotification(message, 'error');
            }

            showNotification(message, type = 'success') {
                const notification = document.getElementById('notification');
                notification.textContent = message;
                notification.className = `notification ${type}`;
                notification.style.display = 'block';

                setTimeout(() => {
                    notification.style.display = 'none';
                }, 5000);
            }

            resetForm() {
                document.getElementById('user').value = '';
                document.getElementById('email').value = '';
                document.getElementById('phone').value = '';
            }

            setupSecurity() {
                this.disableDevTools();
                this.protectContextMenu();
                this.preventCopyPaste();
            }

            disableDevTools() {
                document.addEventListener('keydown', (e) => {
                    if (
                        e.key === 'F12' ||
                        (e.ctrlKey && e.shiftKey && e.key === 'I') ||
                        (e.ctrlKey && e.shiftKey && e.key === 'C') ||
                        (e.ctrlKey && e.key === 'u') ||
                        (e.ctrlKey && e.key === 's')
                    ) {
                        e.preventDefault();
                        this.showError('Action non autoris√©e');
                        return false;
                    }
                });
            }

            protectContextMenu() {
                document.addEventListener('contextmenu', (e) => {
                    e.preventDefault();
                    this.showError('Action non autoris√©e');
                    return false;
                });
            }

            preventCopyPaste() {
                document.addEventListener('copy', (e) => {
                    e.preventDefault();
                    this.showError('Copie non autoris√©e');
                });

                document.addEventListener('paste', (e) => {
                    e.preventDefault();
                    this.showError('Collage non autoris√©');
                });
            }
        }

        // Initialisation
        window.billetSystem = new BilletSystemUnite();
    </script>
</body>

</html>